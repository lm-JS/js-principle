# 闭包

### 什么是闭包？

#### 生活中的闭包

1. (1,5) 是一个区间，但对这个区间做分析、计算什么的，经常会用到1和5这两个不属于这个区间的值，[1,5]就是(1,5)的闭包。
2. 在生活上，我们办事情，找A部门，A部门说，你先得找B部门盖个章，B部门说，你先得找C部门盖个章，C部门说，这个东西不是我们的职权范围…… 踢皮球，这就是非闭包。闭包就是负责到底，你找到A部门，A部门接待的那个人负责到底，他/她去协调B部门和C部门。
3. 在工程上，闭包就是项目经理，负责调度项目所需要的资源。老板、客户有什么事情，直接找项目经理即可，不用再去找其它的人。
4. 在程序语言中，闭包就是一种语法糖，它以很自然的形式，把我们的目的和我们的目的所涉及的资源全给自动打包在一起，以某种自然、尽量不让人误解的方式让人来使用。在很多情况下，需要在一段代码里去访问外部的局部变量，不提供这种语法糖，需要写非常多的代码，有了闭包这个语法糖，就不用写这么多代码，自然而然的就用了。

#### 计算机中闭包的具体理解

1. 闭包（Closure）是词法闭包（Lexical Closure）的简称，是引用了自由变量的函数。这个被引用的自由变量将和这个函数一同存在，即使已经离开了创造它的环境也不例外。
2. 闭包是由函数和与其相关的引用环境组合而成的实体。
3. **闭包是从用户角度考虑的一种设计概念，它基于对上下文的分析，把龌龊的事情、复杂的事情和外部环境交互的事情都自己做了，留给用户一个很自然的接口。**
4. **函数调用返回了一个内嵌函数，而内嵌函数引用了外部函数的局部变量、参数等这些应当被关闭(Close)了的资源**

### 例子：
    var increment = (function(){
	var i = 0;
	return function(){
		return ++i;
	}
    })()

    alert(increment());//1
    alert(increment());//2
　　**例：**外层匿名函数返回的是一个内嵌函数，内嵌函数使用了外层匿名函数的局部变量i。照理外层匿名函数的局部变量在返回时就超出了[作用域][1]因此increment()调用无法使用才对。这是怎么一回事呢？让我们来寻找答案
![closure图][2]  
　　根据Scope Chain的理解可以解释，返回的内嵌函数已经持有了构造它时的Scope Chain，虽然返回导致这些对象超出了作用域、生存期范围，但JavaScript使用自动垃圾回收来释放对象内存: 按照规则定期检查，对象没有任何引用才被释放。因此上面的代码能够正确运行。

 > 闭包是可以包含自由变（未绑定到特定对象）量的代码块；这些变量不是在这个代码块内或者任何全局上下文中定义的，而是在代码块的环境中定义。“闭包”一词来源于以下两者的结合：要执行的代码块和自由变量提供绑定的计算环境。

[1]: https://github.com/lm-JS/js-propotype-this-new-apply-call/tree/master/executionContext_scopeChain 
[2]: closure.png
